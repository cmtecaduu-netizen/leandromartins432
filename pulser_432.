import time
import logging
from datetime import datetime

# Configuração de logging de alta fidelidade
logging.basicConfig(
    filename='heartbeat.log',
    level=logging.INFO,
    format='%(asctime)s | %(message)s',
)

FREQUENCIA = 432.0  # Hz simbólico do Grau 1
INTERVALO = 3600    # segundos (1 hora)

def pulser():
    while True:
        try:
            now = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
            mensagem = f'Pulsação AELOH-432: {now} | FREQUÊNCIA: {FREQUENCIA}Hz'
            logging.info(mensagem)
            print(f'>>> {mensagem}')
            time.sleep(INTERVALO)
        except Exception as e:
            logging.error(f'Erro detectado no pulso: {e}')
            time.sleep(10)  # Redundância de reinicialização

if __name__ == "__main__":
    pulser()
